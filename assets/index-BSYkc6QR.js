var ce=(f,u)=>()=>(u||f((u={exports:{}}).exports,u),u.exports);var de=ce((Ce,E)=>{(async()=>{const f="/assets/wasm_game_of_life_bg-De8vVR7_.wasm",u=async(t={},e)=>{let i;if(e.startsWith("data:")){const s=e.replace(/^data:.*?base64,/,"");let r;if(typeof Buffer=="function"&&typeof Buffer.from=="function")r=Buffer.from(s,"base64");else if(typeof atob=="function"){const a=atob(s);r=new Uint8Array(a.length);for(let c=0;c<a.length;c++)r[c]=a.charCodeAt(c)}else throw new Error("Cannot decode base64-encoded data URL");i=await WebAssembly.instantiate(r,t)}else{const s=await fetch(e),r=s.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&r.startsWith("application/wasm"))i=await WebAssembly.instantiateStreaming(s,t);else{const a=await s.arrayBuffer();i=await WebAssembly.instantiate(a,t)}}return i.instance.exports};let h;function W(t){h=t}const j=typeof TextDecoder>"u"?(0,E.require)("util").TextDecoder:TextDecoder;let S=new j("utf-8",{ignoreBOM:!0,fatal:!0});S.decode();let m=null;function q(){return(m===null||m.byteLength===0)&&(m=new Uint8Array(h.memory.buffer)),m}function z(t,e){return t=t>>>0,S.decode(q().subarray(t,t+e))}const O=typeof TextEncoder>"u"?(0,E.require)("util").TextEncoder:TextEncoder;new O("utf-8").encodeInto;function $(t){return()=>{throw new Error(`${t} is not defined`)}}const k=Object.freeze({Dead:0,0:"Dead",Alive:1,1:"Alive"}),B=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>h.__wbg_universe_free(t>>>0));class _{static __wrap(e){e=e>>>0;const i=Object.create(_.prototype);return i.__wbg_ptr=e,B.register(i,i.__wbg_ptr,i),i}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,B.unregister(this),e}free(){const e=this.__destroy_into_raw();h.__wbg_universe_free(e)}static new(e,i){const s=h.universe_new(e,i);return _.__wrap(s)}width(){return h.universe_width(this.__wbg_ptr)>>>0}height(){return h.universe_height(this.__wbg_ptr)>>>0}set_width(e){h.universe_set_width(this.__wbg_ptr,e)}set_height(e){h.universe_set_height(this.__wbg_ptr,e)}clean_grid(){h.universe_clean_grid(this.__wbg_ptr)}cells(){return h.universe_cells(this.__wbg_ptr)>>>0}tick(){h.universe_tick(this.__wbg_ptr)}toggle_cell(e,i){h.universe_toggle_cell(this.__wbg_ptr,e,i)}}function H(t,e){alert(z(t,e))}const G=typeof Math.random=="function"?Math.random:$("Math.random");function P(t,e){throw new Error(z(t,e))}URL=globalThis.URL;const l=await u({"./wasm_game_of_life_bg.js":{__wbg_alert_d3b6e8db27c82dfa:H,__wbg_random_26e2d782b541ca6b:G,__wbindgen_throw:P}},f),F=l.memory,V=l.greet,X=l.__wbg_universe_free,Y=l.universe_new,J=l.universe_width,K=l.universe_height,N=l.universe_set_width,Q=l.universe_set_height,Z=l.universe_clean_grid,ee=l.universe_cells,te=l.universe_tick,ie=l.universe_toggle_cell,ne=l.__wbindgen_malloc,se=l.__wbindgen_realloc,re=Object.freeze(Object.defineProperty({__proto__:null,__wbg_universe_free:X,__wbindgen_malloc:ne,__wbindgen_realloc:se,greet:V,memory:F,universe_cells:ee,universe_clean_grid:Z,universe_height:K,universe_new:Y,universe_set_height:Q,universe_set_width:N,universe_tick:te,universe_toggle_cell:ie,universe_width:J},Symbol.toStringTag,{value:"Module"}));W(re);const I="#CCCCCC",le="#FFFFFF",ae="#22222",T=[ae,"#2094f3","#009485","#ff9900","#ff5724","#4506cb"];_.new(64,64);class he{constructor(e){this.cellSize=5,this.canvas=document.getElementById(e),this.ctx=this.canvas.getContext("2d"),this.width=64,this.height=64,this.universe=_.new(this.width,this.height),this.darkBackground=!1,this.deadColor=le,this.gridColor=I,this.resizeCanvas()}isDarkBackground(){return this.darkBackground}setDarkBackground(e){this.darkBackground=e,e===!0?(this.deadColor="#2a2e37",this.gridColor="#000000"):(this.deadColor="#FFFFFF",this.gridColor=I)}getUniverse(){return this.universe}getWidth(){return this.width}getHeight(){return this.height}getCellSize(){return this.cellSize}setCellSize(e){this.cellSize=e}getIndex(e,i){return e*this.width+i}getCanvas(){return this.canvas}randomColor(){const e=Math.random()*T.length;return T[Math.round(e)]}drawGrid(){this.ctx.beginPath(),this.ctx.strokeStyle=this.gridColor,this.width,this.height;for(let e=0;e<=this.width;e++)this.ctx.moveTo(e*(this.cellSize+1)+1,0),this.ctx.lineTo(e*(this.cellSize+1)+1,(this.cellSize+1)*this.height+1);for(let e=0;e<=this.height;e++)this.ctx.moveTo(0,e*(this.cellSize+1)+1),this.ctx.lineTo((this.cellSize+1)*this.width+1,e*(this.cellSize+1)+1);this.ctx.stroke()}drawCells(){const e=this.universe.cells(),i=new Uint8Array(F.buffer,e,this.width*this.height);this.ctx.beginPath();for(let s=0;s<this.height;s++)for(let r=0;r<this.width;r++){const a=this.getIndex(s,r);i[a]===k.Alive&&(this.ctx.fillStyle=this.randomColor(),this.ctx.fillRect(r*(this.cellSize+1)+1,s*(this.cellSize+1)+1,this.cellSize,this.cellSize))}this.ctx.fillStyle=this.deadColor;for(let s=0;s<this.height;s++)for(let r=0;r<this.width;r++){const a=this.getIndex(s,r);i[a]===k.Dead&&this.ctx.fillRect(r*(this.cellSize+1)+1,s*(this.cellSize+1)+1,this.cellSize,this.cellSize)}this.ctx.stroke()}toggleCell(e,i){this.universe.toggle_cell(e,i)}resizeCanvas(){this.canvas.height=(this.cellSize+1)*this.height+1,this.canvas.width=(this.cellSize+1)*this.width+1,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}reset(){this.universe.clean_grid()}resetUniverse(e,i){this.width=e,this.height=i,this.universe=_.new(this.width,this.height),this.resizeCanvas()}}new class{constructor(){this.fps=document.getElementById("fps"),this.frames=[],this.lastFrameTimeStamp=performance.now()}render(){const t=performance.now(),e=t-this.lastFrameTimeStamp;this.lastFrameTimeStamp=t;const i=1/e*1e3;this.frames.push(i),this.frames.length>100&&this.frames.shift();let s=1/0,r=-1/0,a=0;for(let g=0;g<this.frames.length;g++)a+=this.frames[g],s=Math.min(this.frames[g],s),r=Math.max(this.frames[g],r);let c=a/this.frames.length;this.fps.textContent=`
        Frames per Second:
          latest = ${Math.round(i)}
          avg of last 100 = ${Math.round(c)}
          min of last 100 = ${Math.round(s)}
          max of last 100 = ${Math.round(r)}
    `.trim()}};let w=null,L=60,v,b,y,p,n=new he("game-of-life-canvas");const C=document.getElementById("play-pause"),M=()=>{C.textContent="\u23F8",v=1e3/L,y=Date.now(),A()},d=()=>{C.textContent="\u25B6",cancelAnimationFrame(w),w=null},oe=()=>w===null;C.addEventListener("click",t=>{oe()?M():d()}),document.getElementById("reset-null").addEventListener("click",t=>{d(),n.reset(),n.drawCells()}),document.getElementById("background-mode").addEventListener("click",t=>{n.setDarkBackground(t.target.checked),n.drawCells()}),document.getElementById("width-range").addEventListener("change",t=>{const e=document.getElementById("width-value");e.innerText=t.target.value,d(),n.resetUniverse(t.target.value,n.getHeight()),n.drawCells()}),document.getElementById("height-range").addEventListener("change",t=>{const e=document.getElementById("height-value");e.innerText=t.target.value,d(),n.resetUniverse(n.getWidth(),t.target.value),n.drawCells()}),document.getElementById("cell-size-range").addEventListener("change",t=>{const e=document.getElementById("cell-size-value");e.innerText=t.target.value,d(),n.setCellSize(parseInt(t.target.value)),n.resizeCanvas(),n.drawCells()}),document.getElementById("reset-random").addEventListener("click",t=>{d();const e=n.getWidth(),i=n.getHeight();n.resetUniverse(e,i),n.drawCells()}),document.getElementById("fullscreen").addEventListener("click",t=>{R()}),document.getElementById("fps-range").addEventListener("change",t=>{const e=document.getElementById("fps-range-value");e.innerText=t.target.value,L=parseInt(t.target.value,10),d(),M()});const A=()=>{n.getUniverse().tick(),D()},D=()=>{w=requestAnimationFrame(A),b=Date.now(),p=b-y,p>v&&(y=b-p%v,n.drawGrid(),n.drawCells())};let o=n.getCanvas(),x=!1;o.addEventListener("mouseup",t=>{x=!1}),o.addEventListener("mousedown",t=>{x=!0});function U(t){const e=o.getBoundingClientRect(),i=o.width/e.width,s=o.height/e.height,r=(t.clientX-e.left)*i,a=(t.clientY-e.top)*s,c=Math.min(Math.floor(a/(n.getCellSize()+1)),n.getHeight()-1),g=Math.min(Math.floor(r/(n.getCellSize()+1)),n.getWidth()-1);n.toggleCell(c,g),n.drawGrid(),n.drawCells()}function R(){const t=document.fullscreenElement;o&&(t?document.exitFullscreen&&document.exitFullscreen():o.requestFullscreen&&o.requestFullscreen())}o.addEventListener("mousemove",t=>{x&&U(t)}),o.addEventListener("click",t=>{U(t)}),o.addEventListener("dblclick",t=>{R()}),D()})()});export default de();
